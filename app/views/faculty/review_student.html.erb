<!DOCTYPE html>
<html>
  <head>
    <style>
        table {
            border-collapse: collapse;
            width: 100%;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 8px;
            text-align: left;
        }
    </style>
</head>
<body>
<h1>Submitting Review for <%= @student.first_name %> <%= @student.last_name %></h1>

<% if @no_documents_message %>
  <p><%= @no_documents_message %></p>
<% else %>

    <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>PHD Start Date</th>
        <th>Milestones Passed</th>
        <th>GPA</th>
        <th>Improvement Plan Present</th>
        <th>Improvement Plan Summary</th>
        <th>Support in Last Semester</th>
        <th>Paper Submissions</th>
        <th>Papers Published</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><%= @documents.first.phd_start_date.present? ? @documents.first.phd_start_date : 'N/A' %></td>
        <td><%= @documents.first.milestones_passed.present? ? @documents.first.milestones_passed : 'N/A' %></td>
        <td><%= @documents.first.gpa.present? ? @documents.first.gpa : 'N/A' %></td>
        <td><%= @documents.first.improvement_plan_present.present? ? @documents.first.improvement_plan_present : 'N/A' %></td>
        <td><%= @documents.first.improvement_plan_summary.present? ? @documents.first.improvement_plan_summary : 'N/A' %></td>
        <td><%= @documents.first.support_in_last_sem.present? ? @documents.first.support_in_last_sem : 'N/A' %></td>
        <td><%= @documents.first.number_of_paper_submissions.present? ? @documents.first.number_of_paper_submissions : 'N/A' %></td>
        <td><%= @documents.first.number_of_papers_published.present? ? @documents.first.number_of_papers_published : 'N/A' %></td>
      </tr>
    </tbody>
  </table>
  <h1>Student Documents</h1>

  <!-- Display the resume file if available -->
  <% if @resume_url.present? %>
    <iframe src="<%= @resume_url %>" width="850" height="650" style="border: 1px solid #000;"></iframe>
  <% end %>

  <% if @report_url.present? %>
    <iframe src="<%= @report_url %>" width="850" height="650" style="border: 1px solid #000;"></iframe>
  <% end %>

  <!-- Add code to display other documents if needed -->

<% non_empty_comments = @private_comments.reject { |assessment| assessment.private_comment.blank? || assessment.private_comment.strip.empty? } %>

  <% if non_empty_comments.present? %>
  <h2>Comment made by other faculty</h2>
  <table>
    <thead>
      <tr>
        <th>Faculty Member</th>
        <th>Comment</th>
      </tr>
    </thead>
    <tbody>
      <% non_empty_comments.each do |assessment| %>
        <tr>
          <td><%= assessment.faculty.first_name %> <%= assessment.faculty.last_name %></td>
          <td><%= assessment.private_comment %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <% end %>

  <h3>Performance Assessment</h3>
  <%= form_tag faculty_save_assessment_path, method: :post do %>
  <input type="hidden" name="id" value="<%= @student.id %>">
  <div>
    <label for="public_comment">Comment for Student:</label>
    <textarea id="public_comment" name="assessment[public_comment]" rows="4" cols="50"></textarea>
  </div>
  <div>
    <label for="private_comment">Comment for Faculty:</label>
    <textarea id="private_comment" name="assessment[private_comment]" rows="4" cols="50"></textarea>
  </div>
  <div>
    <label for="rating">Rating:</label>
    <select id="rating" name="assessment[rating]">
      <option value="Satisfactory">Satisfactory</option>
      <option value="Needs Improvement">Needs Improvement</option>
      <option value="Unsatisfactory">Unsatisfactory</option>
    </select>
  </div>
  <div>
    <label for="nominate_for_award">Nominate for Award:</label>
    <input type="checkbox" id="nominate_for_award" name="assessment[eligible_for_reward]" value="1">
  </div>
  <div>
    <input type="submit" value="Save Assessment" id="save">
  </div>
<% end %>


<% end %>
</body>
</html>
